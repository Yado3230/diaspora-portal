"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5036],{49617:function(e,s,n){n.d(s,{Z:function(){return i}});var t=n(62898);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,t.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},9883:function(e,s,n){n.d(s,{Z:function(){return i}});var t=n(62898);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,t.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},65036:function(e,s,n){n.r(s),n.d(s,{default:function(){return Z}});var t=n(57437),i=n(23611),r=n(56606),a=n(35217),o=n(9883),l=n(24033),c=n(14196),u=n(45487),d=n(17472),m=n(56224),p=n(49617),h=n(4737),f=n(5925),g=n(2265),j=n(83228);let y=e=>{let{data:s}=e,n=e=>{navigator.clipboard.writeText(e),f.Am.success("Package ID copied to the clipboard")},r=(0,l.useRouter)();(0,l.useParams)();let[a,o]=(0,g.useState)(!1),[c,y]=(0,g.useState)(!1),v=async()=>{console.log("deleted")};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(j.V,{isOpen:c,onClose:()=>y(!1),onConfirm:v,loading:a}),(0,t.jsxs)(u.h_,{children:[(0,t.jsx)(u.$F,{asChild:!0,children:(0,t.jsxs)(i.z,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,t.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,t.jsx)(d.Z,{className:"h-4 w-4"})]})}),(0,t.jsxs)(u.AW,{align:"end",children:[(0,t.jsx)(u.Ju,{children:"Actions"}),(0,t.jsxs)(u.Xi,{onClick:()=>n(s.permissionId),children:[(0,t.jsx)(m.Z,{className:"mr-2 h-4 w-4"}),"Copy ID"]}),(0,t.jsxs)(u.Xi,{onClick:()=>r.push("/dashboard/packages/".concat(s.permissionId)),children:[(0,t.jsx)(p.Z,{className:"mr-2 h-4 w-4"}),"Update"]}),(0,t.jsxs)(u.Xi,{onClick:()=>y(!0),children:[(0,t.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})},v=[{accessorKey:"permissionName",header:e=>{let{column:s}=e;return(0,t.jsxs)(i.z,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["Resources",(0,t.jsx)(c.Z,{className:"ml-2 h-4 w-4"})]})}},{accessorKey:"assignedTo",header:e=>{let{column:s}=e;return(0,t.jsxs)(i.z,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["Authorities",(0,t.jsx)(c.Z,{className:"ml-2 h-4 w-4"})]})}},{accessorKey:"createdAt",header:e=>{let{column:s}=e;return(0,t.jsxs)(i.z,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["Date",(0,t.jsx)(c.Z,{className:"ml-2 h-4 w-4"})]})}},{id:"actions",cell:e=>{let{row:s}=e;return(0,t.jsx)(y,{data:s.original})}}];var x=n(46634),b=n(74578),S=n(61865),N=n(38110),w=n(25539),C=n(89179),I=n(35831),E=n(62031),A=n(94660);let k=(0,A.Ue)(e=>({isOpen:!1,onOpen:()=>e({isOpen:!0}),onClose:()=>e({isOpen:!1})})),T=b.Ry({permissionId:b.Z_().default(""),permissionName:b.Z_().default(""),assignedTo:b.IX(b.Z_()).default([]),createdAt:b.Z_().default("")}),O=e=>{let{invoice:s,updated:n,setUpdated:r}=e,a=new Date().toISOString().split("T")[0];console.log(a);let o=k(),[l,c]=(0,g.useState)(!1),u=(0,S.cI)({resolver:(0,N.F)(T),defaultValues:s||{permissionId:"",permissionName:"",assignedTo:[],createdAt:a}}),d=g.useMemo(()=>s?{permissionId:null==s?void 0:s.permissionId,permissionName:null==s?void 0:s.permissionName,assignedTo:[],createdAt:null==s?void 0:s.createdAt}:{permissionId:"",permissionName:"",assignedTo:[],createdAt:a},[s]);g.useEffect(()=>{var e;let{setValue:s}=u;s("permissionName",null!==(e=null==d?void 0:d.permissionName)&&void 0!==e?e:""),s("assignedTo",[]),s("createdAt",a)},[d]);let m=async e=>{try{c(!0);let t=s.permissionId.length?await fetch("/api/permissions",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({permissionId:s.permissionId,permissionName:e.permissionName,assignedTo:e.assignedTo,createdAt:a})}):await fetch("/api/permissions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});o.onClose();let i=await t.json();return r(!n),f.ZP.success(s.permissionId.length?"Updated":"Saved"),i}catch(e){f.ZP.error("Something went wrong!")}finally{c(!1)}};return(0,t.jsx)(w.u,{title:"Add New Permission",description:"Add a new permission for roles",isOpen:o.isOpen,onClose:o.onClose,children:(0,t.jsxs)("div",{className:"spaye-y-4 py-2 pb-4 w-[500PX]",children:[(0,t.jsx)("div",{className:"my-2 p-2 border rounded bg-red-100",children:(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:"block",children:"Warning!"})," By editing or adding the permission name, you might break the system permissions functionality. Please ensure you're absolutely certain before proceeding."]})}),(0,t.jsx)(C.l0,{...u,children:(0,t.jsxs)("form",{onSubmit:u.handleSubmit(m),children:[(0,t.jsx)(C.Wi,{name:"permissionName",control:u.control,render:e=>{let{field:s}=e;return(0,t.jsxs)(C.xJ,{children:[(0,t.jsx)(C.lX,{children:"Permission Name:"}),(0,t.jsx)(C.NI,{children:(0,t.jsx)(I.I,{placeholder:"name",...s})}),(0,t.jsx)(C.zG,{})]})}}),(0,t.jsx)(E.cN,{children:(0,t.jsxs)("div",{className:"pt-6 space-x-2 flex items-center justify-end w-full mt-12",children:[(0,t.jsx)(i.z,{variant:"outline",type:"button",onClick:o.onClose,children:"Cancel"}),(0,t.jsx)(i.z,{type:"submit",disabled:!0,className:"bg-cyan-500",children:s.permissionId.length?"Update":"Add"})]})})]})})]})})};var Z=e=>{let{data:s}=e;(0,l.useRouter)(),(0,l.useParams)();let[n,c]=(0,g.useState)(!1),u=k(),[d,m]=(0,g.useState)({permissionId:"",permissionName:"",assignedTo:[],createdAt:""});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(O,{invoice:d,updated:n,setUpdated:c}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(r.X,{title:"Permissions (".concat(s.length,")"),description:"Manage permission for your users"}),(0,t.jsxs)(i.z,{size:"sm",className:"bg-cyan-500",onClick:()=>{m({permissionId:"",permissionName:"",assignedTo:[],createdAt:""}),u.onOpen()},children:[(0,t.jsx)(o.Z,{className:"mr-2 h-4 w-4"}),"Add Permission"]})]}),(0,t.jsx)(a.Z,{}),(0,t.jsx)(x.w,{searchKey:"permissionName",clickable:!0,columns:v,data:s})]})}},81853:function(e,s,n){/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t=n(2265),i="function"==typeof Object.is?Object.is:function(e,s){return e===s&&(0!==e||1/e==1/s)||e!=e&&s!=s},r=t.useState,a=t.useEffect,o=t.useLayoutEffect,l=t.useDebugValue;function c(e){var s=e.getSnapshot;e=e.value;try{var n=s();return!i(e,n)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,s){return s()}:function(e,s){var n=s(),t=r({inst:{value:n,getSnapshot:s}}),i=t[0].inst,u=t[1];return o(function(){i.value=n,i.getSnapshot=s,c(i)&&u({inst:i})},[e,n,s]),a(function(){return c(i)&&u({inst:i}),e(function(){c(i)&&u({inst:i})})},[e]),l(n),n};s.useSyncExternalStore=void 0!==t.useSyncExternalStore?t.useSyncExternalStore:u},78704:function(e,s,n){/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t=n(2265),i=n(26272),r="function"==typeof Object.is?Object.is:function(e,s){return e===s&&(0!==e||1/e==1/s)||e!=e&&s!=s},a=i.useSyncExternalStore,o=t.useRef,l=t.useEffect,c=t.useMemo,u=t.useDebugValue;s.useSyncExternalStoreWithSelector=function(e,s,n,t,i){var d=o(null);if(null===d.current){var m={hasValue:!1,value:null};d.current=m}else m=d.current;var p=a(e,(d=c(function(){function e(e){if(!l){if(l=!0,a=e,e=t(e),void 0!==i&&m.hasValue){var s=m.value;if(i(s,e))return o=s}return o=e}if(s=o,r(a,e))return s;var n=t(e);return void 0!==i&&i(s,n)?s:(a=e,o=n)}var a,o,l=!1,c=void 0===n?null:n;return[function(){return e(s())},null===c?void 0:function(){return e(c())}]},[s,n,t,i]))[0],d[1]);return l(function(){m.hasValue=!0,m.value=p},[p]),u(p),p}},26272:function(e,s,n){e.exports=n(81853)},65401:function(e,s,n){e.exports=n(78704)},94660:function(e,s,n){n.d(s,{Ue:function(){return d}});let t=e=>{let s;let n=new Set,t=(e,t)=>{let i="function"==typeof e?e(s):e;if(!Object.is(i,s)){let e=s;s=(null!=t?t:"object"!=typeof i||null===i)?i:Object.assign({},s,i),n.forEach(n=>n(s,e))}},i=()=>s,r={setState:t,getState:i,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}};return s=e(t,i,r),r},i=e=>e?t(e):t;var r=n(2265),a=n(65401);let{useDebugValue:o}=r,{useSyncExternalStoreWithSelector:l}=a,c=!1,u=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let s="function"==typeof e?i(e):e,n=(e,n)=>(function(e,s=e.getState,n){n&&!c&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),c=!0);let t=l(e.subscribe,e.getState,e.getServerState||e.getState,s,n);return o(t),t})(s,e,n);return Object.assign(n,s),n},d=e=>e?u(e):u}}]);