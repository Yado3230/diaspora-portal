(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8944],{49617:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var n=t(62898);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,n.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},9883:function(e,s,t){"use strict";t.d(s,{Z:function(){return i}});var n=t(62898);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,n.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},60026:function(e,s,t){Promise.resolve().then(t.bind(t,66557))},66557:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return D}});var n=t(57437),i=t(2265),r=t(23611),a=t(56606),o=t(35217),l=t(9883),c=t(24033),u=t(14196),d=t(45487),m=t(17472),p=t(56224),h=t(49617),f=t(4737),g=t(5925),v=t(83228);let j=e=>{let{data:s}=e,t=e=>{navigator.clipboard.writeText(e),g.Am.success("Package ID copied to the clipboard")},a=(0,c.useRouter)();(0,c.useParams)();let[o,l]=(0,i.useState)(!1),[u,j]=(0,i.useState)(!1),x=async()=>{console.log("deleted")};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v.V,{isOpen:u,onClose:()=>j(!1),onConfirm:x,loading:o}),(0,n.jsxs)(d.h_,{children:[(0,n.jsx)(d.$F,{asChild:!0,children:(0,n.jsxs)(r.z,{variant:"ghost",className:"h-8 w-8 p-0",children:[(0,n.jsx)("span",{className:"sr-only",children:"Open menu"}),(0,n.jsx)(m.Z,{className:"h-4 w-4"})]})}),(0,n.jsxs)(d.AW,{align:"end",children:[(0,n.jsx)(d.Ju,{children:"Actions"}),(0,n.jsxs)(d.Xi,{onClick:()=>t(s.permissionId),children:[(0,n.jsx)(p.Z,{className:"mr-2 h-4 w-4"}),"Copy ID"]}),(0,n.jsxs)(d.Xi,{onClick:()=>a.push("/dashboard/packages/".concat(s.permissionId)),children:[(0,n.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),"Update"]}),(0,n.jsxs)(d.Xi,{onClick:()=>j(!0),children:[(0,n.jsx)(f.Z,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})},x=[{accessorKey:"permissionName",header:e=>{let{column:s}=e;return(0,n.jsxs)(r.z,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["Resources",(0,n.jsx)(u.Z,{className:"ml-2 h-4 w-4"})]})}},{accessorKey:"assignedTo",header:e=>{let{column:s}=e;return(0,n.jsxs)(r.z,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["Authorities",(0,n.jsx)(u.Z,{className:"ml-2 h-4 w-4"})]})}},{accessorKey:"createdAt",header:e=>{let{column:s}=e;return(0,n.jsxs)(r.z,{variant:"ghost",onClick:()=>s.toggleSorting("asc"===s.getIsSorted()),children:["Date",(0,n.jsx)(u.Z,{className:"ml-2 h-4 w-4"})]})}},{id:"actions",cell:e=>{let{row:s}=e;return(0,n.jsx)(j,{data:s.original})}}];var y=t(26224),b=t(74578),S=t(61865),N=t(38110),w=t(25539),E=t(89179),I=t(35831),C=t(62031),A=t(94660);let k=(0,A.Ue)(e=>({isOpen:!1,onOpen:()=>e({isOpen:!0}),onClose:()=>e({isOpen:!1})})),T=b.Ry({permissionId:b.Z_().default(""),permissionName:b.Z_().default(""),assignedTo:b.IX(b.Z_()).default([]),createdAt:b.Z_().default("")}),O=e=>{let{invoice:s,updated:t,setUpdated:a}=e,o=new Date().toISOString().split("T")[0];console.log(o);let l=k(),[c,u]=(0,i.useState)(!1),d=(0,S.cI)({resolver:(0,N.F)(T),defaultValues:s||{permissionId:"",permissionName:"",assignedTo:[],createdAt:o}}),m=i.useMemo(()=>s?{permissionId:null==s?void 0:s.permissionId,permissionName:null==s?void 0:s.permissionName,assignedTo:[],createdAt:null==s?void 0:s.createdAt}:{permissionId:"",permissionName:"",assignedTo:[],createdAt:o},[s]);i.useEffect(()=>{var e;let{setValue:s}=d;s("permissionName",null!==(e=null==m?void 0:m.permissionName)&&void 0!==e?e:""),s("assignedTo",[]),s("createdAt",o)},[m]);let p=async e=>{try{u(!0);let n=s.permissionId.length?await fetch("/api/permissions",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({permissionId:s.permissionId,permissionName:e.permissionName,assignedTo:e.assignedTo,createdAt:o})}):await fetch("/api/permissions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});l.onClose();let i=await n.json();return a(!t),g.ZP.success(s.permissionId.length?"Updated":"Saved"),i}catch(e){g.ZP.error("Something went wrong!")}finally{u(!1)}};return(0,n.jsx)(w.u,{title:"Add New Permission",description:"Add a new permission for roles",isOpen:l.isOpen,onClose:l.onClose,children:(0,n.jsxs)("div",{className:"spaye-y-4 py-2 pb-4 w-[500PX]",children:[(0,n.jsx)("div",{className:"my-2 p-2 border rounded bg-red-100",children:(0,n.jsxs)("span",{children:[(0,n.jsx)("span",{className:"block",children:"Warning!"})," By editing or adding the permission name, you might break the system permissions functionality. Please ensure you're absolutely certain before proceeding."]})}),(0,n.jsx)(E.l0,{...d,children:(0,n.jsxs)("form",{onSubmit:d.handleSubmit(p),children:[(0,n.jsx)(E.Wi,{name:"permissionName",control:d.control,render:e=>{let{field:s}=e;return(0,n.jsxs)(E.xJ,{children:[(0,n.jsx)(E.lX,{children:"Permission Name:"}),(0,n.jsx)(E.NI,{children:(0,n.jsx)(I.I,{placeholder:"name",...s})}),(0,n.jsx)(E.zG,{})]})}}),(0,n.jsx)(C.cN,{children:(0,n.jsxs)("div",{className:"pt-6 space-x-2 flex items-center justify-end w-full mt-12",children:[(0,n.jsx)(r.z,{variant:"outline",type:"button",onClick:l.onClose,children:"Cancel"}),(0,n.jsx)(r.z,{type:"submit",disabled:!0,className:"bg-cyan-500",children:s.permissionId.length?"Update":"Add"})]})})]})})]})})};var P=e=>{let{data:s}=e;(0,c.useRouter)(),(0,c.useParams)();let[t,u]=(0,i.useState)(!1),d=k(),[m,p]=(0,i.useState)({permissionId:"",permissionName:"",assignedTo:[],createdAt:""});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(O,{invoice:m,updated:t,setUpdated:u}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)(a.X,{title:"Permissions (".concat(s.length,")"),description:"Manage permission for your users"}),(0,n.jsxs)(r.z,{size:"sm",className:"bg-cyan-500",onClick:()=>{p({permissionId:"",permissionName:"",assignedTo:[],createdAt:""}),d.onOpen()},children:[(0,n.jsx)(l.Z,{className:"mr-2 h-4 w-4"}),"Add Permission"]})]}),(0,n.jsx)(o.Z,{}),(0,n.jsx)(y.w,{searchKey:"permissionName",clickable:!0,columns:x,data:s})]})};let Z=async()=>{let[e,s]=(0,i.useState)(!1),[t,r]=(0,i.useState)([]);(0,i.useEffect)(()=>{let e=async()=>{let e=await fetch("/api/permissions");if(!e.ok)throw Error("Request failed with status: ".concat(e.status));let s=await e.json();r(s instanceof Array?s:[])};e()},[e]);let a=t.map(e=>{var s;return{permissionId:(null===(s=e.permissionId)||void 0===s?void 0:s.toString())||"0",permissionName:e.permissionName,assignedTo:e.assignedTo,createdAt:e.createdAt}});return(0,n.jsx)("div",{className:"flex-col bg-background shadow-sm",children:(0,n.jsx)("div",{className:"flex-1 space-y-4 p-8 pt-6",children:(0,n.jsx)(P,{data:a})})})};var D=Z},81853:function(e,s,t){"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=t(2265),i="function"==typeof Object.is?Object.is:function(e,s){return e===s&&(0!==e||1/e==1/s)||e!=e&&s!=s},r=n.useState,a=n.useEffect,o=n.useLayoutEffect,l=n.useDebugValue;function c(e){var s=e.getSnapshot;e=e.value;try{var t=s();return!i(e,t)}catch(e){return!0}}var u="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,s){return s()}:function(e,s){var t=s(),n=r({inst:{value:t,getSnapshot:s}}),i=n[0].inst,u=n[1];return o(function(){i.value=t,i.getSnapshot=s,c(i)&&u({inst:i})},[e,t,s]),a(function(){return c(i)&&u({inst:i}),e(function(){c(i)&&u({inst:i})})},[e]),l(t),t};s.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:u},78704:function(e,s,t){"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=t(2265),i=t(26272),r="function"==typeof Object.is?Object.is:function(e,s){return e===s&&(0!==e||1/e==1/s)||e!=e&&s!=s},a=i.useSyncExternalStore,o=n.useRef,l=n.useEffect,c=n.useMemo,u=n.useDebugValue;s.useSyncExternalStoreWithSelector=function(e,s,t,n,i){var d=o(null);if(null===d.current){var m={hasValue:!1,value:null};d.current=m}else m=d.current;var p=a(e,(d=c(function(){function e(e){if(!l){if(l=!0,a=e,e=n(e),void 0!==i&&m.hasValue){var s=m.value;if(i(s,e))return o=s}return o=e}if(s=o,r(a,e))return s;var t=n(e);return void 0!==i&&i(s,t)?s:(a=e,o=t)}var a,o,l=!1,c=void 0===t?null:t;return[function(){return e(s())},null===c?void 0:function(){return e(c())}]},[s,t,n,i]))[0],d[1]);return l(function(){m.hasValue=!0,m.value=p},[p]),u(p),p}},26272:function(e,s,t){"use strict";e.exports=t(81853)},65401:function(e,s,t){"use strict";e.exports=t(78704)},94660:function(e,s,t){"use strict";t.d(s,{Ue:function(){return d}});let n=e=>{let s;let t=new Set,n=(e,n)=>{let i="function"==typeof e?e(s):e;if(!Object.is(i,s)){let e=s;s=(null!=n?n:"object"!=typeof i||null===i)?i:Object.assign({},s,i),t.forEach(t=>t(s,e))}},i=()=>s,r={setState:n,getState:i,subscribe:e=>(t.add(e),()=>t.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}};return s=e(n,i,r),r},i=e=>e?n(e):n;var r=t(2265),a=t(65401);let{useDebugValue:o}=r,{useSyncExternalStoreWithSelector:l}=a,c=!1,u=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let s="function"==typeof e?i(e):e,t=(e,t)=>(function(e,s=e.getState,t){t&&!c&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),c=!0);let n=l(e.subscribe,e.getState,e.getServerState||e.getState,s,t);return o(n),n})(s,e,t);return Object.assign(t,s),t},d=e=>e?u(e):u}},function(e){e.O(0,[8310,1425,7895,5107,9233,7471,7774,7025,3382,2006,8699,2971,2472,1744],function(){return e(e.s=60026)}),_N_E=e.O()}]);