(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1498],{49671:function(e,t,n){Promise.resolve().then(n.bind(n,64027))},64027:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var r=n(57437),s=n(83228),a=n(74578),l=n(61865),i=n(38110),o=n(25539),d=n(89179),c=n(35831),u=n(23611),m=n(2265),f=n(94660);let x=(0,f.Ue)(e=>({isOpen:!1,onOpen:()=>e({isOpen:!0}),onClose:()=>e({isOpen:!1})}));var p=n(5925);n(7468);var h=n(62031),b=n(28811),j=n.n(b);let y=j()(()=>Promise.all([n.e(3070),n.e(263),n.e(2077),n.e(6233)]).then(n.t.bind(n,6233,23)),{ssr:!1}),v=a.Ry({id:a.Z_().default(""),title:a.Z_().default(""),subject:a.Z_().default(""),body:a.Z_().default("")}),g=e=>{let{invoice:t,updated:n,setUpdated:s}=e,a=x(),[f,b]=(0,m.useState)(!1),j=(0,l.cI)({resolver:(0,i.F)(v),defaultValues:t||{id:"",title:"",subject:"",body:""}}),g=m.useMemo(()=>t?{id:null==t?void 0:t.id,title:null==t?void 0:t.title,body:null==t?void 0:t.body,subject:null==t?void 0:t.subject}:{id:"",title:"",subject:"",body:""},[t]);m.useEffect(()=>{var e,t,n;let{setValue:r}=j;r("title",null!==(e=null==g?void 0:g.title)&&void 0!==e?e:""),r("subject",null!==(t=null==g?void 0:g.subject)&&void 0!==t?t:""),r("body",null!==(n=null==g?void 0:g.body)&&void 0!==n?n:"")},[g]);let N=async e=>{try{b(!0);let r=t.id.length?await fetch("/api/emails",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t.id,subject:e.subject,title:e.title,body:e.body})}):await fetch("/api/emails",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});a.onClose();let l=await r.json();return s(!n),p.ZP.success(t.id.length?"Updated":"Saved"),l}catch(e){p.ZP.error("Something went wrong!")}finally{b(!1)}};return(0,r.jsx)(o.u,{title:"Add Email Format",description:"Add a new email format",isOpen:a.isOpen,onClose:a.onClose,children:(0,r.jsx)("div",{className:"spaye-y-4 py-2 pb-4",children:(0,r.jsx)(d.l0,{...j,children:(0,r.jsxs)("form",{onSubmit:j.handleSubmit(N),children:[(0,r.jsx)(d.Wi,{name:"title",control:j.control,render:e=>{let{field:t}=e;return(0,r.jsxs)(d.xJ,{children:[(0,r.jsx)(d.lX,{children:"Email Title:"}),(0,r.jsx)(d.NI,{children:(0,r.jsx)(c.I,{placeholder:"email title",...t})}),(0,r.jsx)(d.zG,{})]})}}),(0,r.jsx)(d.Wi,{name:"subject",control:j.control,render:e=>{let{field:t}=e;return(0,r.jsxs)(d.xJ,{children:[(0,r.jsx)(d.lX,{children:"Subject:"}),(0,r.jsx)(d.NI,{children:(0,r.jsx)(c.I,{placeholder:"subject",...t})}),(0,r.jsx)(d.zG,{})]})}}),(0,r.jsx)(d.Wi,{name:"body",control:j.control,render:e=>{let{field:t}=e;return(0,r.jsxs)(d.xJ,{children:[(0,r.jsx)(d.lX,{children:"Email Body:"}),(0,r.jsx)(d.NI,{children:(0,r.jsx)(y,{theme:"snow",style:{height:"160px",fontFamily:"Arial, sans-serif"},modules:{toolbar:[[{font:[]}],[{header:[1,2,3]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{script:"sub"},{script:"super"}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"},{align:[]}],["link","image","video"],["clean"]]},...t})}),(0,r.jsx)(d.zG,{})]})}}),(0,r.jsx)(h.cN,{children:(0,r.jsxs)("div",{className:"pt-6 space-x-2 flex items-center justify-end w-full mt-12",children:[(0,r.jsx)(u.z,{variant:"outline",type:"button",onClick:a.onClose,children:"Cancel"}),(0,r.jsx)(u.z,{type:"submit",disabled:f,className:"bg-cyan-500",children:t.id.length?"Update":"Add"})]})})]})})})})};var N=n(56606),w=n(66005),E=n(9883),C=n(49617),R=n(4737),I=()=>{let e=x(),[t,n]=(0,m.useState)([]),[a,l]=(0,m.useState)(!1);(0,m.useEffect)(()=>{let e=async()=>{let e=await fetch("/api/emails");if(!e.ok)throw Error("Request failed with status: ".concat(e.status));let t=await e.json();n(t instanceof Array?t:[])};e()},[a]);let[i,o]=(0,m.useState)(!1),[d,c]=(0,m.useState)({id:"",title:"",body:"",subject:""}),[f,p]=(0,m.useState)(!1),h=async()=>{},b=localStorage.getItem("authorities");return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.V,{isOpen:f,onClose:()=>p(!1),onConfirm:h,loading:i}),(0,r.jsx)(g,{invoice:d,updated:a,setUpdated:l}),(0,r.jsxs)("div",{className:"bg-gray-100 p-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"Replacement Keys"}),(0,r.jsx)("ul",{className:"grid grid-cols-3",children:["name","account-id","phone-number","mother-name","gender","initial-deposit","monthly-income","occupation","branch","state","city","account-type"].map(e=>(0,r.jsxs)("li",{className:"mb-2",children:[(0,r.jsx)("strong",{children:"{{".concat(e,"}}")}),": for ",e]},e))})]}),(0,r.jsxs)("div",{className:"flex border-b pb-2 mb-5 items-center justify-between",children:[(0,r.jsx)(N.X,{title:"Emails (".concat(t.length,")"),description:"Manage email formats from here and use it anywhere"}),(0,r.jsx)("div",{}),(0,r.jsx)("div",{className:"".concat(!(null==b?void 0:b.includes("WRITE_EMAIL"))&&"cursor-not-allowed"),title:"".concat(!(null==b?void 0:b.includes("WRITE_EMAIL"))&&"Not Authorized"),children:(0,r.jsxs)(u.z,{disabled:!(null==b?void 0:b.includes("WRITE_EMAIL")),size:"sm",className:"bg-cyan-500",onClick:()=>{c({id:"",title:"",body:"",subject:""}),e.onOpen()},children:[(0,r.jsx)(E.Z,{className:"mr-2 h-4 w-4"}),"Add New"]})})]}),(0,r.jsxs)(w.iA,{children:[(0,r.jsx)(w.Rn,{children:"A list of your email formats."}),(0,r.jsx)(w.xD,{children:(0,r.jsxs)(w.SC,{children:[(0,r.jsx)(w.ss,{className:"",children:"Email Name"}),(0,r.jsx)(w.ss,{children:"Subject"}),(0,r.jsx)(w.ss,{className:"text-right",children:"Actions"})]})}),(0,r.jsx)(w.RM,{children:t.map(t=>(0,r.jsxs)(w.SC,{children:[(0,r.jsx)(w.pj,{className:"font-medium opacity-75",children:t.title}),(0,r.jsx)(w.pj,{className:"opacity-75",children:t.subject}),(0,r.jsx)(w.pj,{children:(0,r.jsxs)("div",{className:"flex items-center whitespace-nowrap space-x-2 opacity-75",children:[(0,r.jsx)("div",{className:"".concat(!(null==b?void 0:b.includes("EDIT_EMAIL"))&&"cursor-not-allowed"),title:"".concat(!(null==b?void 0:b.includes("EDIT_EMAIL"))&&"Not Authorized"),children:(0,r.jsx)(u.z,{disabled:!(null==b?void 0:b.includes("EDIT_EMAIL")),variant:"outline",className:"border-none",size:"icon",children:(0,r.jsx)(C.Z,{color:"#06B6D4",onClick:()=>{c(t),e.onOpen()},className:"w-5 h-5 cursor-pointer"})})}),(0,r.jsx)("div",{className:"".concat(!(null==b?void 0:b.includes("DELETE_EMAIL"))&&"cursor-not-allowed"),title:"".concat(!(null==b?void 0:b.includes("DELETE_EMAIL"))&&"Not Authorized"),children:(0,r.jsx)(u.z,{disabled:!(null==b?void 0:b.includes("DELETE_EMAIL")),variant:"outline",className:"border-none",size:"icon",children:(0,r.jsx)(R.Z,{color:"#DE8224",onClick:()=>p(!0),className:"w-5 h-5 cursor-pointer"})})})]})})]},t.id))})]})]})}},83228:function(e,t,n){"use strict";n.d(t,{V:function(){return i}});var r=n(57437),s=n(2265),a=n(25539),l=n(23611);let i=e=>{let{isOpen:t,onClose:n,onConfirm:i,loading:o}=e,[d,c]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{c(!0)},[]),d)?(0,r.jsx)(a.u,{title:"Are you sure?",description:"This action cannot be undone.",isOpen:t,onClose:n,children:(0,r.jsxs)("div",{className:"pt-6 space-x-2 flex items-center justify-end w-96",children:[(0,r.jsx)(l.z,{disabled:o,variant:"outline",onClick:n,children:"Cancel"}),(0,r.jsx)(l.z,{disabled:o,variant:"destructive",onClick:i,children:"Continue"})]})}):null}},23611:function(e,t,n){"use strict";n.d(t,{z:function(){return d}});var r=n(57437),s=n(2265),a=n(67256),l=n(96061),i=n(81628);let o=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:n,variant:s,size:l,asChild:d=!1,...c}=e,u=d?a.g7:"button";return(0,r.jsx)(u,{className:(0,i.cn)(o({variant:s,size:l,className:n})),ref:t,...c})});d.displayName="Button"},62031:function(e,t,n){"use strict";n.d(t,{$N:function(){return x},Be:function(){return p},Vq:function(){return o},cN:function(){return f},cZ:function(){return u},fK:function(){return m}});var r=n(57437),s=n(2265),a=n(28712),l=n(69394),i=n(81628);let o=a.fC;a.xz;let d=a.h_;a.x8;let c=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(a.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...s})});c.displayName=a.aV.displayName;let u=s.forwardRef((e,t)=>{let{className:n,children:s,...o}=e;return(0,r.jsxs)(d,{children:[(0,r.jsx)(c,{}),(0,r.jsxs)(a.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...o,children:[s,(0,r.jsxs)(a.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(l.Pxu,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=a.VY.displayName;let m=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...n})};m.displayName="DialogHeader";let f=e=>{let{className:t,...n}=e;return(0,r.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};f.displayName="DialogFooter";let x=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(a.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",n),...s})});x.displayName=a.Dx.displayName;let p=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(a.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",n),...s})});p.displayName=a.dk.displayName},89179:function(e,t,n){"use strict";n.d(t,{l0:function(){return m},NI:function(){return y},Wi:function(){return x},xJ:function(){return b},lX:function(){return j},zG:function(){return g}});var r=n(57437),s=n(2265),a=n(67256),l=n(61865),i=n(81628),o=n(36743),d=n(96061);let c=(0,d.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)(o.f,{ref:t,className:(0,i.cn)(c(),n),...s})});u.displayName=o.f.displayName;let m=l.RV,f=s.createContext({}),x=e=>{let{...t}=e;return(0,r.jsx)(f.Provider,{value:{name:t.name},children:(0,r.jsx)(l.Qr,{...t})})},p=()=>{let e=s.useContext(f),t=s.useContext(h),{getFieldState:n,formState:r}=(0,l.Gc)(),a=n(e.name,r);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:"".concat(i,"-form-item"),formDescriptionId:"".concat(i,"-form-item-description"),formMessageId:"".concat(i,"-form-item-message"),...a}},h=s.createContext({}),b=s.forwardRef((e,t)=>{let{className:n,...a}=e,l=s.useId();return(0,r.jsx)(h.Provider,{value:{id:l},children:(0,r.jsx)("div",{ref:t,className:(0,i.cn)("space-y-2",n),...a})})});b.displayName="FormItem";let j=s.forwardRef((e,t)=>{let{className:n,...s}=e,{error:a,formItemId:l}=p();return(0,r.jsx)(u,{ref:t,className:(0,i.cn)(a&&"text-destructive",n),htmlFor:l,...s})});j.displayName="FormLabel";let y=s.forwardRef((e,t)=>{let{...n}=e,{error:s,formItemId:l,formDescriptionId:i,formMessageId:o}=p();return(0,r.jsx)(a.g7,{ref:t,id:l,"aria-describedby":s?"".concat(i," ").concat(o):"".concat(i),"aria-invalid":!!s,...n})});y.displayName="FormControl";let v=s.forwardRef((e,t)=>{let{className:n,...s}=e,{formDescriptionId:a}=p();return(0,r.jsx)("p",{ref:t,id:a,className:(0,i.cn)("text-[0.8rem] text-muted-foreground",n),...s})});v.displayName="FormDescription";let g=s.forwardRef((e,t)=>{let{className:n,children:s,...a}=e,{error:l,formMessageId:o}=p(),d=l?String(null==l?void 0:l.message):s;return d?(0,r.jsx)("p",{ref:t,id:o,className:(0,i.cn)("text-[0.8rem] font-medium text-destructive",n),...a,children:d}):null});g.displayName="FormMessage"},56606:function(e,t,n){"use strict";n.d(t,{X:function(){return s}});var r=n(57437);let s=e=>{let{title:t,description:n}=e;return(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-cyan-500 tracking-tight",children:t}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:n})]})}},35831:function(e,t,n){"use strict";n.d(t,{I:function(){return l}});var r=n(57437),s=n(2265),a=n(81628);let l=s.forwardRef((e,t)=>{let{className:n,type:s,...l}=e;return(0,r.jsx)("input",{type:s,className:(0,a.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...l})});l.displayName="Input"},25539:function(e,t,n){"use strict";n.d(t,{u:function(){return a}});var r=n(57437),s=n(62031);let a=e=>{let{title:t,description:n,isOpen:a,onClose:l,children:i}=e;return(0,r.jsx)(s.Vq,{open:a,onOpenChange:e=>{e||l()},children:(0,r.jsxs)(s.cZ,{className:"",children:[(0,r.jsxs)(s.fK,{children:[(0,r.jsx)(s.$N,{children:t}),(0,r.jsx)(s.Be,{children:n})]}),(0,r.jsx)("div",{children:i})]})})}},66005:function(e,t,n){"use strict";n.d(t,{RM:function(){return o},Rn:function(){return f},SC:function(){return c},iA:function(){return l},pj:function(){return m},ss:function(){return u},xD:function(){return i}});var r=n(57437),s=n(2265),a=n(81628);let l=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,a.cn)("w-full caption-bottom text-sm",n),...s})})});l.displayName="Table";let i=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("thead",{ref:t,className:(0,a.cn)("[&_tr]:border-b",n),...s})});i.displayName="TableHeader";let o=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,a.cn)("[&_tr:last-child]:border-0",n),...s})});o.displayName="TableBody";let d=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,a.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",n),...s})});d.displayName="TableFooter";let c=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("tr",{ref:t,className:(0,a.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",n),...s})});c.displayName="TableRow";let u=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("th",{ref:t,className:(0,a.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...s})});u.displayName="TableHead";let m=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("td",{ref:t,className:(0,a.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",n),...s})});m.displayName="TableCell";let f=s.forwardRef((e,t)=>{let{className:n,...s}=e;return(0,r.jsx)("caption",{ref:t,className:(0,a.cn)("mt-4 text-sm text-muted-foreground",n),...s})});f.displayName="TableCaption"},81628:function(e,t,n){"use strict";n.d(t,{cn:function(){return a}});var r=n(57042),s=n(74769);function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.m6)((0,r.W)(t))}}},function(e){e.O(0,[8310,3985,5107,7471,9233,3382,9110,1209,2971,2472,1744],function(){return e(e.s=49671)}),_N_E=e.O()}]);