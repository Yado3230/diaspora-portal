"use strict";exports.id=583,exports.ids=[583],exports.modules={50706:(e,s,a)=>{a.d(s,{LT:()=>r,RH:()=>d,_H:()=>i,jj:()=>l,tm:()=>o,wh:()=>n});let t="https://10.1.177.121:8881/",r=async e=>{try{let s=new URL(`${t}api/v1/accounts`);s.searchParams.append("sortBy","percentage_completed"),s.searchParams.append("sortDirection","desc"),"include"===e?s.searchParams.append("status","INITIAL"):"exclude"===e&&s.searchParams.append("statusToExclude","INITIAL");let a=await fetch(s.toString()),r=await a.json();return r}catch(e){throw console.error("Error:",e),e}},l=async e=>{try{let s=new URL(`${t}api/v1/accounts/dashboard-report`);e&&s.searchParams.append("year",e.toString());let a=await fetch(s.toString()),r=await a.json();return r}catch(e){throw console.error("Error:",e),e}},n=async e=>{try{let s=new URL(`${t}api/v1/accounts/monthly-dashboard-report`);e&&s.searchParams.append("year",e.toString());let a=await fetch(s.toString()),r=await a.json();return r}catch(e){throw console.error("Error:",e),e}},i=async e=>{try{let s=await fetch(`${t}api/v1/accounts/${e}`);return s.json()}catch(e){throw console.error("Error:",e),e}},o=async e=>{try{let s=await fetch(`${t}api/v1/accounts/${e}`,{method:"DELETE"});if(!s.ok)throw Error(`Request failed with status: ${s.status}`);let a=s.ok;return a}catch(e){throw console.error("Error:",e),e}},d=async(e,s)=>{try{let a=await fetch(`${t}api/v1/accounts/${e}/update-status?status=${s}`,{method:"PUT"});if(!a.ok)throw Error(`Request failed with status: ${a.status}`);let r=a.ok;return r}catch(e){throw console.error("Error:",e),e}}},90583:(e,s,a)=>{a.d(s,{Z:()=>f});var t=a(53854),r=a(50706),l=a(7857),n=a(86815),i=a(74219),o=a(23708);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,o.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var c=a(80294),p=a(8465),m=a.n(p),x=a(41956),h=a.n(x),u=a(51018),g=a(34218),N=a(85256);a(24221);let j=m()(async()=>{},{loadableGenerated:{modules:["D:\\Projects\\diaspora-portal\\app\\admin\\components\\AccountPreview.tsx -> react-quill"]},ssr:!1}),f=({data:e,accounts:s})=>{let a=(0,u.useRouter)(),o=localStorage.getItem("authorities"),[p,m]=(0,g.useState)(!1),[x,f]=(0,g.useState)({to:e?.email,name:e?.fullName,title:"Rejection Notification",subject:"Rejection of Your Account",body:'<p>Dear <strong style="color: rgb(0, 102, 204);">{{name}}</strong>,</p><p><br></p><p><br></p><p><br></p><p><br></p><p>Best regards,</p><p>Diaspora Banking</p><p>Cooperative Bank of Oromia</p>',userId:btoa(e.id.toString()),phoneNumber:e?.phone,motherName:e?.motherName,gender:e?.sex,initialDeposit:e?.initialDeposit,monthlyIncome:e?.monthlyIncome,occupation:e?.occupation,branch:e?.branch,accountType:e?.accountType,city:e?.city,state:e?.state}),b=({src:e,label:s})=>(0,t.jsxs)("div",{className:"bg-white p-4 border rounded",children:[t.jsx(h(),{src:e,width:200,height:40,alt:s,className:"rounded-lg w-full h-auto mb-2"}),t.jsx("p",{className:"text-sm text-gray-600",children:s})]}),y=async()=>{m(!0);try{await (0,r.RH)(e.id.toString(),"APPROVED"),a.refresh(),N.ZP.success("Account Approved.")}catch(e){N.ZP.error("Something went wrong!")}finally{a.back(),m(!1)}},v=async()=>{m(!0);try{let s=await fetch("/api/sendemail",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});s.ok?(await (0,r.RH)(e.id.toString(),"REJECTED"),N.ZP.success("Account rejected.")):console.error("Error sending email:",await s.json()),a.refresh()}catch(e){N.ZP.error("Something went wrong!")}finally{a.back(),m(!1)}};return t.jsx("div",{className:"container mx-auto",children:(0,t.jsxs)("div",{className:"max-w-full mx-auto bg-white p-8 border rounded shadow-lg",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center mb-6",children:[t.jsx("img",{src:e?.photo,alt:"Profile Photo",className:"rounded-full border mb-4",style:{width:"150px",height:"150px"}}),t.jsx("h1",{className:"text-3xl font-bold text-cyan-600",children:e?.accountType||t.jsx("span",{className:"text-red-400",children:"Not Filled"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 my-10",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center mb-6 w-full p-5 border rounded shadow",children:[t.jsx(b,{src:e?.residenceCard||"",label:"Residence Card"}),t.jsx("h1",{className:"text-xl font-semibold text-gray-800 mb-2",children:e?.fullName||t.jsx("span",{className:"text-red-400",children:"Not Filled"})}),t.jsx("p",{className:"text-gray-600",children:e?.email||t.jsx("span",{className:"text-red-400",children:"Not Filled"})})]}),(0,t.jsxs)("div",{className:"col-span-2 flex flex-col gap-8 p-5 border rounded shadow",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 border-b py-2",children:[(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Address"}),(0,t.jsxs)("p",{className:"text-gray-600 grid grid-cols-2 gap-4",children:[t.jsx("span",{className:"font-bold",children:"Street Address "}),(0,t.jsxs)("span",{children:[":"," ",e?.streetAddress||t.jsx("span",{className:"text-red-400",children:"Not Filled"})]})]}),(0,t.jsxs)("p",{className:"text-gray-600 grid grid-cols-2 gap-4",children:[t.jsx("span",{className:"font-bold",children:"City "}),(0,t.jsxs)("span",{children:[":"," ",e?.city||t.jsx("span",{className:"text-red-400",children:"Not Filled"})]})]}),(0,t.jsxs)("p",{className:"text-gray-600 grid grid-cols-2 gap-4",children:[t.jsx("span",{className:"font-bold",children:"State "}),(0,t.jsxs)("span",{children:[":"," ",e?.state||t.jsx("span",{className:"text-red-400",children:"Not Filled"})]})]}),(0,t.jsxs)("p",{className:"text-gray-600 grid grid-cols-2 gap-4",children:[t.jsx("span",{className:"font-bold",children:"ZipCode "}),(0,t.jsxs)("span",{children:[":"," ",e?.zipCode||t.jsx("span",{className:"text-red-400",children:"Not Filled"})]})]}),(0,t.jsxs)("p",{className:"text-gray-600 grid grid-cols-2 gap-4",children:[t.jsx("span",{className:"font-bold",children:"Country "}),(0,t.jsxs)("span",{children:[":"," ",e?.country||t.jsx("span",{className:"text-red-400",children:"Not Filled"})]})]})]}),(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Occupation"}),(0,t.jsxs)("p",{className:"text-gray-600 grid grid-cols-2 gap-4 mb-5",children:[t.jsx("span",{className:"font-bold",children:"Occupation "}),(0,t.jsxs)("span",{children:[":"," ",e?.occupation||t.jsx("span",{className:"text-red-400",children:"Not Filled"})]})]}),t.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Status"}),(0,t.jsxs)("p",{className:"text-gray-600 grid grid-cols-2 gap-4",children:[t.jsx("span",{className:"font-bold",children:"Status:"}),(0,t.jsxs)("span",{children:[":"," ",e?.status||t.jsx("span",{className:"text-red-400",children:"Not Filled"})]})]}),(0,t.jsxs)("p",{className:"text-gray-600 items-center justify-center grid grid-cols-2 gap-4",children:[t.jsx("span",{className:"font-bold",children:"Completed"}),(0,t.jsxs)("span",{className:"flex items-center space-x-1",children:[t.jsx(i.E,{value:e?.percentageCompleted?e?.percentageCompleted*20:0}),(0,t.jsxs)("span",{children:[e?.percentageCompleted?e?.percentageCompleted*20:0,"%"]})]})]})]})]}),(0,t.jsxs)("div",{className:" border-b py-2",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Financial Information"}),(0,t.jsxs)("p",{className:"text-gray-600 grid grid-cols-2 gap-4",children:[t.jsx("span",{className:"font-bold",children:"Initial Deposit"}),(0,t.jsxs)("span",{children:[": $",e?.initialDeposit.toLocaleString()||t.jsx("span",{className:"text-red-400",children:"Not Filled"})]})]}),(0,t.jsxs)("p",{className:"text-gray-600 grid grid-cols-2 gap-4",children:[t.jsx("span",{className:"font-bold",children:"Monthly Income"}),(0,t.jsxs)("span",{children:[": $",e?.monthlyIncome.toLocaleString()||t.jsx("span",{className:"text-red-400",children:"Not Filled"})]})]})]})]}),t.jsx("div",{children:(0,t.jsxs)("div",{className:"",children:[t.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"Other Details"}),(0,t.jsxs)("p",{className:"text-gray-600 grid grid-cols-2 gap-4",children:[t.jsx("span",{className:"font-bold",children:"Sex"}),(0,t.jsxs)("span",{children:[":"," ",e?.sex||t.jsx("span",{className:"text-red-400",children:"Not Filled"})]})]}),(0,t.jsxs)("p",{className:"text-gray-600 grid grid-cols-2 gap-4",children:[t.jsx("span",{className:"font-bold",children:"Branch"}),(0,t.jsxs)("span",{children:[":"," ",e?.branch||t.jsx("span",{className:"text-red-400",children:"Not Filled"})]})]}),(0,t.jsxs)("p",{className:"text-gray-600 grid grid-cols-2 gap-4",children:[t.jsx("span",{className:"font-bold",children:"Account Type"}),(0,t.jsxs)("span",{children:[":"," ",e?.accountType||t.jsx("span",{className:"text-red-400",children:"Not Filled"})]})]})]})})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-8 mb-8",children:[t.jsx(b,{src:e?.passport||"",label:`${e?.passport?"Passport":"Not Uploaded"}`}),t.jsx(b,{src:e?.signature||"",label:`${e?.passport?"Signature":"Not Uploaded"}`}),t.jsx(b,{src:e?.confirmationForm||"",label:`${e?.passport?"Confirmation Form":"Not Uploaded"}`})]}),(0,t.jsxs)("div",{className:"flex items-center justify-end border-t pt-5",children:[t.jsx(l.z,{className:"ml-2 border",size:"sm",onClick:()=>a.back(),variant:"secondary",children:"Cancel"}),s&&(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx("div",{className:`${!(o?.includes("EDIT_ACCOUNT")||o?.includes("WRITE_ACCOUNT"))&&"cursor-not-allowed"}`,title:`${!(o?.includes("EDIT_ACCOUNT")||o?.includes("WRITE_ACCOUNT"))&&"Not Authorized"}`,children:(0,t.jsxs)(n.J2,{children:[t.jsx(n.xo,{asChild:!0,children:(0,t.jsxs)(l.z,{disabled:!(o?.includes("EDIT_ACCOUNT")||o?.includes("WRITE_ACCOUNT"))||p||e?.status==="REJECTED"||e?.status==="APPROVED",className:"ml-2 border",size:"sm",variant:"destructive",children:[t.jsx(d,{className:"mr-2 h-4 w-4"}),"Reject"]})}),t.jsx(n.yk,{className:"w-[480px] mr-20 h-[420px]",children:(0,t.jsxs)("div",{className:"flex flex-col justify-between h-full",children:[t.jsx("div",{className:"h-full",children:t.jsx(j,{theme:"snow",style:{height:"250px",fontFamily:"Arial, sans-serif"},modules:{toolbar:[[{font:[]}],[{header:[1,2,3]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{script:"sub"},{script:"super"}],["blockquote","code-block"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"},{align:[]}],["link","image","video"],["clean"]]},value:x.body,onChange:e=>{f({...x,body:e})}})}),t.jsx("div",{className:"self-end",children:(0,t.jsxs)(l.z,{disabled:!(o?.includes("EDIT_ACCOUNT")||o?.includes("WRITE_ACCOUNT"))||p||e?.status==="REJECTED"||e?.status==="APPROVED",className:"ml-2 border",size:"sm",variant:"destructive",onClick:v,children:[t.jsx(d,{className:"mr-2 h-4 w-4"}),"Confirm Rejection"]})})]})})]})}),t.jsx("div",{className:`${!(o?.includes("EDIT_ACCOUNT")||o?.includes("WRITE_ACCOUNT"))&&"cursor-not-allowed"}`,title:`${!(o?.includes("EDIT_ACCOUNT")||o?.includes("WRITE_ACCOUNT"))&&"Not Authorized"}`,children:(0,t.jsxs)(l.z,{disabled:!(o?.includes("EDIT_ACCOUNT")||o?.includes("WRITE_ACCOUNT"))||p||e?.status==="REJECTED"||e?.status==="APPROVED",className:"ml-2 border bg-cyan-500",size:"sm",onClick:y,children:[t.jsx(c.Z,{className:"mr-2 h-4 w-4"}),"Approve"]})})]})]})]})})}},86815:(e,s,a)=>{a.d(s,{J2:()=>i,xo:()=>o,yk:()=>d});var t=a(53854),r=a(34218),l=a(69570),n=a(56370);let i=l.fC,o=l.xz,d=r.forwardRef(({className:e,align:s="center",sideOffset:a=4,...r},i)=>t.jsx(l.h_,{children:t.jsx(l.VY,{ref:i,align:s,sideOffset:a,className:(0,n.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));d.displayName=l.VY.displayName},74219:(e,s,a)=>{a.d(s,{E:()=>y});var t=a(53854),r=a(34218),l=a(93836),n=a(65864),i=a(59280);let o="Progress",[d,c]=(0,n.b)(o),[p,m]=d(o),x=(0,r.forwardRef)((e,s)=>{let{__scopeProgress:a,value:t,max:n,getValueLabel:o=u,...d}=e,c=j(n)?n:100,m=f(t,c)?t:null,x=N(m)?o(m,c):void 0;return(0,r.createElement)(p,{scope:a,value:m,max:c},(0,r.createElement)(i.WV.div,(0,l.Z)({"aria-valuemax":c,"aria-valuemin":0,"aria-valuenow":N(m)?m:void 0,"aria-valuetext":x,role:"progressbar","data-state":g(m,c),"data-value":null!=m?m:void 0,"data-max":c},d,{ref:s})))});x.propTypes={max(e,s,a){let t=e[s],r=String(t);return t&&!j(t)?Error(`Invalid prop \`max\` of value \`${r}\` supplied to \`${a}\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`):null},value(e,s,a){let t=e[s],r=String(t),l=j(e.max)?e.max:100;return null==t||f(t,l)?null:Error(`Invalid prop \`value\` of value \`${r}\` supplied to \`${a}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` if the progress is indeterminate.

Defaulting to \`null\`.`)}};let h=(0,r.forwardRef)((e,s)=>{var a;let{__scopeProgress:t,...n}=e,o=m("ProgressIndicator",t);return(0,r.createElement)(i.WV.div,(0,l.Z)({"data-state":g(o.value,o.max),"data-value":null!==(a=o.value)&&void 0!==a?a:void 0,"data-max":o.max},n,{ref:s}))});function u(e,s){return`${Math.round(e/s*100)}%`}function g(e,s){return null==e?"indeterminate":e===s?"complete":"loading"}function N(e){return"number"==typeof e}function j(e){return N(e)&&!isNaN(e)&&e>0}function f(e,s){return N(e)&&!isNaN(e)&&e<=s&&e>=0}var b=a(56370);let y=r.forwardRef(({className:e,value:s,...a},r)=>t.jsx(x,{ref:r,className:(0,b.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...a,children:t.jsx(h,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(s||0)}%)`}})}));y.displayName=x.displayName}};