"use strict";exports.id=373,exports.ids=[373],exports.modules={19373:(e,s,t)=>{t.r(s),t.d(s,{default:()=>k});var n=t(53854),i=t(7857),r=t(7599),a=t(60),o=t(14024),l=t(51018),c=t(62634),d=t(59744),u=t(22139),m=t(79908),p=t(42095),h=t(70108),g=t(85256),f=t(34218),x=t.n(f),j=t(31485);let y=({data:e})=>{let s=e=>{navigator.clipboard.writeText(e),g.Am.success("Package ID copied to the clipboard")},t=(0,l.useRouter)();(0,l.useParams)();let[r,a]=(0,f.useState)(!1),[o,c]=(0,f.useState)(!1),x=async()=>{console.log("deleted")};return(0,n.jsxs)(n.Fragment,{children:[n.jsx(j.V,{isOpen:o,onClose:()=>c(!1),onConfirm:x,loading:r}),(0,n.jsxs)(d.h_,{children:[n.jsx(d.$F,{asChild:!0,children:(0,n.jsxs)(i.z,{variant:"ghost",className:"h-8 w-8 p-0",children:[n.jsx("span",{className:"sr-only",children:"Open menu"}),n.jsx(u.Z,{className:"h-4 w-4"})]})}),(0,n.jsxs)(d.AW,{align:"end",children:[n.jsx(d.Ju,{children:"Actions"}),(0,n.jsxs)(d.Xi,{onClick:()=>s(e.permissionId),children:[n.jsx(m.Z,{className:"mr-2 h-4 w-4"}),"Copy ID"]}),(0,n.jsxs)(d.Xi,{onClick:()=>t.push(`/dashboard/packages/${e.permissionId}`),children:[n.jsx(p.Z,{className:"mr-2 h-4 w-4"}),"Update"]}),(0,n.jsxs)(d.Xi,{onClick:()=>c(!0),children:[n.jsx(h.Z,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})},b=[{accessorKey:"permissionName",header:({column:e})=>(0,n.jsxs)(i.z,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),children:["Resources",n.jsx(c.Z,{className:"ml-2 h-4 w-4"})]})},{accessorKey:"assignedTo",header:({column:e})=>(0,n.jsxs)(i.z,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),children:["Authorities",n.jsx(c.Z,{className:"ml-2 h-4 w-4"})]})},{accessorKey:"createdAt",header:({column:e})=>(0,n.jsxs)(i.z,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),children:["Date",n.jsx(c.Z,{className:"ml-2 h-4 w-4"})]})},{id:"actions",cell:({row:e})=>n.jsx(y,{data:e.original})}];var v=t(68218),S=t(61460),N=t(92747),w=t(44468),I=t(68916),C=t(11620),A=t(24769),E=t(1800),T=t(74012);let O=(0,T.Ue)(e=>({isOpen:!1,onOpen:()=>e({isOpen:!0}),onClose:()=>e({isOpen:!1})})),Z=S.Ry({permissionId:S.Z_().default(""),permissionName:S.Z_().default(""),assignedTo:S.IX(S.Z_()).default([]),createdAt:S.Z_().default("")}),P=({invoice:e,updated:s,setUpdated:t})=>{let r=new Date().toISOString().split("T")[0];console.log(r);let a=O(),[o,l]=(0,f.useState)(!1),c=(0,N.cI)({resolver:(0,w.F)(Z),defaultValues:e||{permissionId:"",permissionName:"",assignedTo:[],createdAt:r}}),d=x().useMemo(()=>e?{permissionId:e?.permissionId,permissionName:e?.permissionName,assignedTo:[],createdAt:e?.createdAt}:{permissionId:"",permissionName:"",assignedTo:[],createdAt:r},[e]);x().useEffect(()=>{let{setValue:e}=c;e("permissionName",d?.permissionName??""),e("assignedTo",[]),e("createdAt",r)},[d]);let u=async n=>{try{l(!0);let i=e.permissionId.length?await fetch("/api/permissions",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({permissionId:e.permissionId,permissionName:n.permissionName,assignedTo:n.assignedTo,createdAt:r})}):await fetch("/api/permissions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});a.onClose();let o=await i.json();return t(!s),g.ZP.success(e.permissionId.length?"Updated":"Saved"),o}catch(e){g.ZP.error("Something went wrong!")}finally{l(!1)}};return n.jsx(I.u,{title:"Add New Permission",description:"Add a new permission for roles",isOpen:a.isOpen,onClose:a.onClose,children:(0,n.jsxs)("div",{className:"spaye-y-4 py-2 pb-4 w-[500PX]",children:[n.jsx("div",{className:"my-2 p-2 border rounded bg-red-100",children:(0,n.jsxs)("span",{children:[n.jsx("span",{className:"block",children:"Warning!"})," By editing or adding the permission name, you might break the system permissions functionality. Please ensure you're absolutely certain before proceeding."]})}),n.jsx(C.l0,{...c,children:(0,n.jsxs)("form",{onSubmit:c.handleSubmit(u),children:[n.jsx(C.Wi,{name:"permissionName",control:c.control,render:({field:e})=>(0,n.jsxs)(C.xJ,{children:[n.jsx(C.lX,{children:"Permission Name:"}),n.jsx(C.NI,{children:n.jsx(A.I,{placeholder:"name",...e})}),n.jsx(C.zG,{})]})}),n.jsx(E.cN,{children:(0,n.jsxs)("div",{className:"pt-6 space-x-2 flex items-center justify-end w-full mt-12",children:[n.jsx(i.z,{variant:"outline",type:"button",onClick:a.onClose,children:"Cancel"}),n.jsx(i.z,{type:"submit",disabled:!0,className:"bg-cyan-500",children:e.permissionId.length?"Update":"Add"})]})})]})})]})})},k=({data:e})=>{(0,l.useRouter)(),(0,l.useParams)();let[s,t]=(0,f.useState)(!1),c=O(),[d,u]=(0,f.useState)({permissionId:"",permissionName:"",assignedTo:[],createdAt:""});return(0,n.jsxs)(n.Fragment,{children:[n.jsx(P,{invoice:d,updated:s,setUpdated:t}),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[n.jsx(r.X,{title:`Permissions (${e.length})`,description:"Manage permission for your users"}),(0,n.jsxs)(i.z,{size:"sm",className:"bg-cyan-500",onClick:()=>{u({permissionId:"",permissionName:"",assignedTo:[],createdAt:""}),c.onOpen()},children:[n.jsx(o.Z,{className:"mr-2 h-4 w-4"}),"Add Permission"]})]}),n.jsx(a.Z,{}),n.jsx(v.w,{searchKey:"permissionName",clickable:!0,columns:b,data:e})]})}},42095:(e,s,t)=>{t.d(s,{Z:()=>i});var n=t(23708);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,n.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},14024:(e,s,t)=>{t.d(s,{Z:()=>i});var n=t(23708);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,n.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},95397:(e,s,t)=>{/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=t(34218);"function"==typeof Object.is&&Object.is,n.useState,n.useEffect,n.useLayoutEffect,n.useDebugValue,s.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:function(e,s){return s()}},4403:(e,s,t)=>{/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=t(34218),i=t(41913),r="function"==typeof Object.is?Object.is:function(e,s){return e===s&&(0!==e||1/e==1/s)||e!=e&&s!=s},a=i.useSyncExternalStore,o=n.useRef,l=n.useEffect,c=n.useMemo,d=n.useDebugValue;s.useSyncExternalStoreWithSelector=function(e,s,t,n,i){var u=o(null);if(null===u.current){var m={hasValue:!1,value:null};u.current=m}else m=u.current;var p=a(e,(u=c(function(){function e(e){if(!l){if(l=!0,a=e,e=n(e),void 0!==i&&m.hasValue){var s=m.value;if(i(s,e))return o=s}return o=e}if(s=o,r(a,e))return s;var t=n(e);return void 0!==i&&i(s,t)?s:(a=e,o=t)}var a,o,l=!1,c=void 0===t?null:t;return[function(){return e(s())},null===c?void 0:function(){return e(c())}]},[s,t,n,i]))[0],u[1]);return l(function(){m.hasValue=!0,m.value=p},[p]),d(p),p}},41913:(e,s,t)=>{e.exports=t(95397)},57359:(e,s,t)=>{e.exports=t(4403)},74012:(e,s,t)=>{t.d(s,{Ue:()=>u});let n=e=>{let s;let t=new Set,n=(e,n)=>{let i="function"==typeof e?e(s):e;if(!Object.is(i,s)){let e=s;s=(null!=n?n:"object"!=typeof i||null===i)?i:Object.assign({},s,i),t.forEach(t=>t(s,e))}},i=()=>s,r={setState:n,getState:i,subscribe:e=>(t.add(e),()=>t.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}};return s=e(n,i,r),r},i=e=>e?n(e):n;var r=t(34218),a=t(57359);let{useDebugValue:o}=r,{useSyncExternalStoreWithSelector:l}=a,c=!1,d=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let s="function"==typeof e?i(e):e,t=(e,t)=>(function(e,s=e.getState,t){t&&!c&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),c=!0);let n=l(e.subscribe,e.getState,e.getServerState||e.getState,s,t);return o(n),n})(s,e,t);return Object.assign(t,s),t},u=e=>e?d(e):d}};