(()=>{var e={};e.id=944,e.ids=[944],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},61487:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var r=t(67096),i=t(16132),a=t(37284),n=t.n(a),o=t(32564),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);t.d(s,l);let d=["",{children:["admin",{children:["permissions",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,2171)),"D:\\Projects\\diaspora-portal\\app\\admin\\permissions\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,28836)),"D:\\Projects\\diaspora-portal\\app\\admin\\permissions\\layout.tsx"],error:[()=>Promise.resolve().then(t.bind(t,90555)),"D:\\Projects\\diaspora-portal\\app\\admin\\permissions\\error.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,82458)),"D:\\Projects\\diaspora-portal\\app\\admin\\layout.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,2297)),"D:\\Projects\\diaspora-portal\\app\\admin\\loading.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,50353)),"D:\\Projects\\diaspora-portal\\app\\admin\\not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,54910)),"D:\\Projects\\diaspora-portal\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(t.bind(t,88734)),"D:\\Projects\\diaspora-portal\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\Projects\\diaspora-portal\\app\\admin\\permissions\\page.tsx"],u="/admin/permissions/page",p={require:t,loadChunk:()=>Promise.resolve()},m=new r.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/admin/permissions/page",pathname:"/admin/permissions",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},20042:(e,s,t)=>{Promise.resolve().then(t.bind(t,86197))},62453:(e,s,t)=>{Promise.resolve().then(t.bind(t,9509))},10433:(e,s,t)=>{Promise.resolve().then(t.bind(t,23796))},86197:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>Error});var r=t(53854),i=t(34218);function Error({error:e,reset:s}){return(0,i.useEffect)(()=>{console.error(e)},[e]),(0,r.jsxs)("div",{className:"w-full flex-col h-[400px] flex items-center justify-center",children:[r.jsx("h2",{className:"text-xl text-muted-foreground",children:"Something went wrong!"}),(0,r.jsxs)("div",{className:"flex space-x-2 text-red-500",children:[(0,r.jsxs)("p",{children:[e.name,":"]}),(0,r.jsxs)("p",{children:[" ",e.message]})]}),r.jsx("button",{className:"border shadow px-2 py-1 mt-8",onClick:()=>s(),children:"Try again"})]})}},9509:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var r=t(53854),i=t(34218),a=t(51018);function n({children:e}){let s=(0,a.useRouter)(),t=localStorage.getItem("authorities");return(0,i.useEffect)(()=>{t?.length!==214&&s.push("/admin")},[t]),r.jsx("div",{children:r.jsx("div",{children:e})})}},23796:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>O});var r=t(53854),i=t(34218),a=t.n(i),n=t(7857),o=t(7599),l=t(60),d=t(14024),c=t(51018),u=t(62634),p=t(59744),m=t(22139),h=t(79908),x=t(42095),f=t(70108),g=t(85256),j=t(31485);let y=({data:e})=>{let s=e=>{navigator.clipboard.writeText(e),g.Am.success("Package ID copied to the clipboard")},t=(0,c.useRouter)();(0,c.useParams)();let[a,o]=(0,i.useState)(!1),[l,d]=(0,i.useState)(!1),u=async()=>{console.log("deleted")};return(0,r.jsxs)(r.Fragment,{children:[r.jsx(j.V,{isOpen:l,onClose:()=>d(!1),onConfirm:u,loading:a}),(0,r.jsxs)(p.h_,{children:[r.jsx(p.$F,{asChild:!0,children:(0,r.jsxs)(n.z,{variant:"ghost",className:"h-8 w-8 p-0",children:[r.jsx("span",{className:"sr-only",children:"Open menu"}),r.jsx(m.Z,{className:"h-4 w-4"})]})}),(0,r.jsxs)(p.AW,{align:"end",children:[r.jsx(p.Ju,{children:"Actions"}),(0,r.jsxs)(p.Xi,{onClick:()=>s(e.permissionId),children:[r.jsx(h.Z,{className:"mr-2 h-4 w-4"}),"Copy ID"]}),(0,r.jsxs)(p.Xi,{onClick:()=>t.push(`/dashboard/packages/${e.permissionId}`),children:[r.jsx(x.Z,{className:"mr-2 h-4 w-4"}),"Update"]}),(0,r.jsxs)(p.Xi,{onClick:()=>d(!0),children:[r.jsx(f.Z,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})},v=[{accessorKey:"permissionName",header:({column:e})=>(0,r.jsxs)(n.z,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),children:["Resources",r.jsx(u.Z,{className:"ml-2 h-4 w-4"})]})},{accessorKey:"assignedTo",header:({column:e})=>(0,r.jsxs)(n.z,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),children:["Authorities",r.jsx(u.Z,{className:"ml-2 h-4 w-4"})]})},{accessorKey:"createdAt",header:({column:e})=>(0,r.jsxs)(n.z,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),children:["Date",r.jsx(u.Z,{className:"ml-2 h-4 w-4"})]})},{id:"actions",cell:({row:e})=>r.jsx(y,{data:e.original})}];var b=t(41588),P=t(61460),S=t(92747),w=t(44468),N=t(68916),E=t(11620),A=t(24769),I=t(1800),C=t(74012);let _=(0,C.Ue)(e=>({isOpen:!1,onOpen:()=>e({isOpen:!0}),onClose:()=>e({isOpen:!1})})),D=P.Ry({permissionId:P.Z_().default(""),permissionName:P.Z_().default(""),assignedTo:P.IX(P.Z_()).default([]),createdAt:P.Z_().default("")}),T=({invoice:e,updated:s,setUpdated:t})=>{let o=new Date().toISOString().split("T")[0];console.log(o);let l=_(),[d,c]=(0,i.useState)(!1),u=(0,S.cI)({resolver:(0,w.F)(D),defaultValues:e||{permissionId:"",permissionName:"",assignedTo:[],createdAt:o}}),p=a().useMemo(()=>e?{permissionId:e?.permissionId,permissionName:e?.permissionName,assignedTo:[],createdAt:e?.createdAt}:{permissionId:"",permissionName:"",assignedTo:[],createdAt:o},[e]);a().useEffect(()=>{let{setValue:e}=u;e("permissionName",p?.permissionName??""),e("assignedTo",[]),e("createdAt",o)},[p]);let m=async r=>{try{c(!0);let i=e.permissionId.length?await fetch("/api/permissions",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({permissionId:e.permissionId,permissionName:r.permissionName,assignedTo:r.assignedTo,createdAt:o})}):await fetch("/api/permissions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});l.onClose();let a=await i.json();return t(!s),g.ZP.success(e.permissionId.length?"Updated":"Saved"),a}catch(e){g.ZP.error("Something went wrong!")}finally{c(!1)}};return r.jsx(N.u,{title:"Add New Permission",description:"Add a new permission for roles",isOpen:l.isOpen,onClose:l.onClose,children:(0,r.jsxs)("div",{className:"spaye-y-4 py-2 pb-4 w-[500PX]",children:[r.jsx("div",{className:"my-2 p-2 border rounded bg-red-100",children:(0,r.jsxs)("span",{children:[r.jsx("span",{className:"block",children:"Warning!"})," By editing or adding the permission name, you might break the system permissions functionality. Please ensure you're absolutely certain before proceeding."]})}),r.jsx(E.l0,{...u,children:(0,r.jsxs)("form",{onSubmit:u.handleSubmit(m),children:[r.jsx(E.Wi,{name:"permissionName",control:u.control,render:({field:e})=>(0,r.jsxs)(E.xJ,{children:[r.jsx(E.lX,{children:"Permission Name:"}),r.jsx(E.NI,{children:r.jsx(A.I,{placeholder:"name",...e})}),r.jsx(E.zG,{})]})}),r.jsx(I.cN,{children:(0,r.jsxs)("div",{className:"pt-6 space-x-2 flex items-center justify-end w-full mt-12",children:[r.jsx(n.z,{variant:"outline",type:"button",onClick:l.onClose,children:"Cancel"}),r.jsx(n.z,{type:"submit",disabled:!0,className:"bg-cyan-500",children:e.permissionId.length?"Update":"Add"})]})})]})})]})})},k=({data:e})=>{(0,c.useRouter)(),(0,c.useParams)();let[s,t]=(0,i.useState)(!1),a=_(),[u,p]=(0,i.useState)({permissionId:"",permissionName:"",assignedTo:[],createdAt:""});return(0,r.jsxs)(r.Fragment,{children:[r.jsx(T,{invoice:u,updated:s,setUpdated:t}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx(o.X,{title:`Permissions (${e.length})`,description:"Manage permission for your users"}),(0,r.jsxs)(n.z,{size:"sm",className:"bg-cyan-500",onClick:()=>{p({permissionId:"",permissionName:"",assignedTo:[],createdAt:""}),a.onOpen()},children:[r.jsx(d.Z,{className:"mr-2 h-4 w-4"}),"Add Permission"]})]}),r.jsx(l.Z,{}),r.jsx(b.w,{searchKey:"permissionName",clickable:!0,columns:v,data:e})]})},q=async()=>{let[e,s]=(0,i.useState)(!1),[t,a]=(0,i.useState)([]);(0,i.useEffect)(()=>{let e=async()=>{let e=await fetch("/api/permissions");if(!e.ok)throw Error(`Request failed with status: ${e.status}`);let s=await e.json();a(s instanceof Array?s:[])};e()},[e]);let n=t.map(e=>({permissionId:e.permissionId?.toString()||"0",permissionName:e.permissionName,assignedTo:e.assignedTo,createdAt:e.createdAt}));return r.jsx("div",{className:"flex-col bg-background shadow-sm",children:r.jsx("div",{className:"flex-1 space-y-4 p-8 pt-6",children:r.jsx(k,{data:n})})})},O=q},42095:(e,s,t)=>{"use strict";t.d(s,{Z:()=>i});var r=t(23708);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,r.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},14024:(e,s,t)=>{"use strict";t.d(s,{Z:()=>i});var r=t(23708);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,r.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},95397:(e,s,t)=>{"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=t(34218);"function"==typeof Object.is&&Object.is,r.useState,r.useEffect,r.useLayoutEffect,r.useDebugValue,s.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:function(e,s){return s()}},4403:(e,s,t)=>{"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r=t(34218),i=t(41913),a="function"==typeof Object.is?Object.is:function(e,s){return e===s&&(0!==e||1/e==1/s)||e!=e&&s!=s},n=i.useSyncExternalStore,o=r.useRef,l=r.useEffect,d=r.useMemo,c=r.useDebugValue;s.useSyncExternalStoreWithSelector=function(e,s,t,r,i){var u=o(null);if(null===u.current){var p={hasValue:!1,value:null};u.current=p}else p=u.current;var m=n(e,(u=d(function(){function e(e){if(!l){if(l=!0,n=e,e=r(e),void 0!==i&&p.hasValue){var s=p.value;if(i(s,e))return o=s}return o=e}if(s=o,a(n,e))return s;var t=r(e);return void 0!==i&&i(s,t)?s:(n=e,o=t)}var n,o,l=!1,d=void 0===t?null:t;return[function(){return e(s())},null===d?void 0:function(){return e(d())}]},[s,t,r,i]))[0],u[1]);return l(function(){p.hasValue=!0,p.value=m},[m]),c(m),m}},41913:(e,s,t)=>{"use strict";e.exports=t(95397)},57359:(e,s,t)=>{"use strict";e.exports=t(4403)},90555:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>a,default:()=>l});var r=t(95153);let i=(0,r.createProxy)(String.raw`D:\Projects\diaspora-portal\app\admin\permissions\error.tsx`),{__esModule:a,$$typeof:n}=i,o=i.default,l=o},28836:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>a,default:()=>l});var r=t(95153);let i=(0,r.createProxy)(String.raw`D:\Projects\diaspora-portal\app\admin\permissions\layout.tsx`),{__esModule:a,$$typeof:n}=i,o=i.default,l=o},2171:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>n,__esModule:()=>a,default:()=>l});var r=t(95153);let i=(0,r.createProxy)(String.raw`D:\Projects\diaspora-portal\app\admin\permissions\page.tsx`),{__esModule:a,$$typeof:n}=i,o=i.default,l=o},74012:(e,s,t)=>{"use strict";t.d(s,{Ue:()=>u});let r=e=>{let s;let t=new Set,r=(e,r)=>{let i="function"==typeof e?e(s):e;if(!Object.is(i,s)){let e=s;s=(null!=r?r:"object"!=typeof i||null===i)?i:Object.assign({},s,i),t.forEach(t=>t(s,e))}},i=()=>s,a={setState:r,getState:i,subscribe:e=>(t.add(e),()=>t.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}};return s=e(r,i,a),a},i=e=>e?r(e):r;var a=t(34218),n=t(57359);let{useDebugValue:o}=a,{useSyncExternalStoreWithSelector:l}=n,d=!1,c=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let s="function"==typeof e?i(e):e,t=(e,t)=>(function(e,s=e.getState,t){t&&!d&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),d=!0);let r=l(e.subscribe,e.getState,e.getServerState||e.getState,s,t);return o(r),r})(s,e,t);return Object.assign(t,s),t},u=e=>e?c(e):c}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[271,635,827,273,929,187,398,36,953,694],()=>t(61487));module.exports=r})();