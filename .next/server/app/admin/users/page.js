(()=>{var e={};e.id=674,e.ids=[674],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},1364:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c});var s=r(67096),a=r(16132),n=r(37284),o=r.n(n),i=r(32564),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let c=["",{children:["admin",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,33924)),"D:\\Projects\\diaspora-portal\\app\\admin\\users\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,38975)),"D:\\Projects\\diaspora-portal\\app\\admin\\users\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,82458)),"D:\\Projects\\diaspora-portal\\app\\admin\\layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,2297)),"D:\\Projects\\diaspora-portal\\app\\admin\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,50353)),"D:\\Projects\\diaspora-portal\\app\\admin\\not-found.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,54910)),"D:\\Projects\\diaspora-portal\\app\\layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,88734)),"D:\\Projects\\diaspora-portal\\app\\loading.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["D:\\Projects\\diaspora-portal\\app\\admin\\users\\page.tsx"],u="/admin/users/page",p={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/users/page",pathname:"/admin/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},31604:(e,t,r)=>{Promise.resolve().then(r.bind(r,36496))},13141:(e,t,r)=>{Promise.resolve().then(r.bind(r,67350))},72214:(e,t,r)=>{"use strict";r.d(t,{Aq:()=>l,Rd:()=>i,fA:()=>o,mZ:()=>n,xJ:()=>a});let s="https://10.1.177.121:8881/",a=async()=>{try{let e=await fetch(`${s}api/v1/roles`),t=await e.json();return t}catch(e){throw console.error("Error:",e),e}},n=async()=>{try{let e=await fetch(`${s}api/v1/authorities`),t=await e.json();return t}catch(e){throw console.error("Error:",e),e}},o=async e=>{try{let t=await fetch(`${s}api/v1/roles`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await t.json();return r}catch(e){throw console.error("Error:",e),e}},i=async e=>{try{let t=await fetch(`${s}api/v1/roles/${e}`,{method:"DELETE",headers:{"Content-Type":"application/json"}}),r=await t.json();return r}catch(e){throw console.error("Error:",e),e}},l=async(e,t)=>{try{let r=await fetch(`${s}api/v1/roles/${t}/set-authorities`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await r.json();return a}catch(e){throw console.error("Error:",e),e}}},70165:(e,t,r)=>{"use strict";r.d(t,{AW:()=>a,Md:()=>o,r4:()=>n});let s="https://10.1.177.121:8881/",a=async()=>{try{let e=await fetch(`${s}api/v1/users`),t=await e.json();return t}catch(e){throw console.error("Error:",e),e}},n=async e=>{try{let t=await fetch(`${s}api/v1/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error(`Request failed with status: ${t.status}`);let r=await t.json();return r}catch(e){throw console.error("Error:",e),e}},o=async e=>{try{let t=await fetch(`${s}login`,{method:"POST",body:JSON.stringify(e)});if(!t.ok){if(401===t.status)throw Error("Please check your username and password.");throw Error(`Request failed with status: ${t.status}`)}let r=await t.json();return r}catch(e){if(e instanceof TypeError)throw Error("Network error: Unable to connect to the server.");throw console.error("Error:",e),e}}},36496:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var s=r(53854),a=r(34218),n=r(51018);function o({children:e}){let t=(0,n.useRouter)(),r=localStorage.getItem("authorities");return(0,a.useEffect)(()=>{r?.includes("READ_USER")||t.push("/admin")},[r]),s.jsx("div",{children:s.jsx("div",{children:e})})}},67350:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>k});var s=r(53854),a=r(7857),n=r(14024),o=r(62634),i=r(59744),l=r(22139),c=r(79908),d=r(70108),u=r(85256),p=r(34218),h=r(31485),m=r(51018),x=r(74012);let f=(0,x.Ue)(e=>({isOpen:!1,onOpen:()=>e({isOpen:!0}),onClose:()=>e({isOpen:!1})}));var y=r(61460),j=r(92747),g=r(44468),v=r(68916),w=r(11620),b=r(24769),S=r(49968),E=r(72214),P=r(70165);let N=y.Ry({fullName:y.Z_().min(1),email:y.Z_().default(""),password:y.Z_().default(""),roleId:y.Z_()}),C=()=>{let e=f(),[t,r]=(0,p.useState)([]),[n,o]=(0,p.useState)(!1);(0,p.useEffect)(()=>{let e=async()=>{let e=await (0,E.xJ)();r(e instanceof Array?e:[])};e()},[]);let i=(0,j.cI)({resolver:(0,g.F)(N),defaultValues:{fullName:"",email:"",password:"",roleId:""}}),l=async t=>{try{o(!0);let r=await (0,P.r4)(t);r&&(u.Am.success("User Created"),window.location.reload()),e.onClose()}catch(e){u.Am.error("Something went wrong!")}finally{o(!1)}};return s.jsx(v.u,{title:"Add User",description:"Add a new user",isOpen:e.isOpen,onClose:e.onClose,children:s.jsx("div",{className:"spaye-y-4 py-2 pb-4 w-96",children:s.jsx(w.l0,{...i,children:(0,s.jsxs)("form",{onSubmit:i.handleSubmit(l),children:[s.jsx(w.Wi,{name:"fullName",control:i.control,render:({field:e})=>(0,s.jsxs)(w.xJ,{children:[s.jsx(w.lX,{children:"Full Name:"}),s.jsx(w.NI,{children:s.jsx(b.I,{placeholder:"fullname",...e})}),s.jsx(w.zG,{})]})}),s.jsx(w.Wi,{name:"email",control:i.control,render:({field:e})=>(0,s.jsxs)(w.xJ,{children:[s.jsx(w.lX,{children:"Email:"}),s.jsx(w.NI,{children:s.jsx(b.I,{type:"email",placeholder:"email",...e})}),s.jsx(w.zG,{})]})}),s.jsx(w.Wi,{name:"password",control:i.control,render:({field:e})=>(0,s.jsxs)(w.xJ,{children:[s.jsx(w.lX,{children:"Password:"}),s.jsx(w.NI,{children:s.jsx(b.I,{type:"password",placeholder:"password",...e})}),s.jsx(w.zG,{})]})}),s.jsx(w.Wi,{control:i.control,name:"roleId",render:({field:e})=>(0,s.jsxs)(w.xJ,{children:[s.jsx(w.lX,{children:"Role:"}),(0,s.jsxs)(S.Ph,{disabled:n,onValueChange:e.onChange,value:e.value.toString(),defaultValue:e.value.toString(),children:[s.jsx(w.NI,{children:s.jsx(S.i4,{children:s.jsx(S.ki,{defaultValue:e.value,placeholder:"Select a role"})})}),s.jsx(S.Bw,{children:t.filter(e=>"SUPER-ADMIN"!==e.roleName).map(e=>s.jsx(S.Ql,{value:e.id?.toString()||"",children:e.roleName},e.id))})]}),s.jsx(w.zG,{})]})}),(0,s.jsxs)("div",{className:"pt-6 space-x-2 flex items-center justify-end w-full",children:[s.jsx(a.z,{variant:"outline",type:"button",onClick:e.onClose,children:"Cancel"}),s.jsx(a.z,{type:"submit",disabled:n,className:"bg-cyan-500",children:"Continue"})]})]})})})})},A=({data:e})=>{let t=e=>{navigator.clipboard.writeText(e),u.Am.success("client ID copied to the clipboard")};(0,m.useRouter)();let[r,n]=(0,p.useState)(!1),[o,x]=(0,p.useState)(!1);f();let y=async()=>{};return(0,s.jsxs)(s.Fragment,{children:[s.jsx(h.V,{isOpen:o,onClose:()=>x(!1),onConfirm:y,loading:r}),s.jsx(C,{}),(0,s.jsxs)(i.h_,{children:[s.jsx(i.$F,{asChild:!0,children:(0,s.jsxs)(a.z,{variant:"ghost",className:"h-8 w-8 p-0",children:[s.jsx("span",{className:"sr-only",children:"Open menu"}),s.jsx(l.Z,{className:"h-4 w-4"})]})}),(0,s.jsxs)(i.AW,{align:"end",children:[s.jsx(i.Ju,{children:"Actions"}),(0,s.jsxs)(i.Xi,{onClick:()=>t(e.userId.toString()),children:[s.jsx(c.Z,{className:"mr-2 h-4 w-4"}),"Copy ID"]}),(0,s.jsxs)(i.Xi,{onClick:()=>x(!0),children:[s.jsx(d.Z,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})},D=[{accessorKey:"fullName",header:({column:e})=>(0,s.jsxs)(a.z,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),children:["Full Name",s.jsx(o.Z,{className:"ml-2 h-4 w-4"})]})},{accessorKey:"email",header:({column:e})=>(0,s.jsxs)(a.z,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),children:["Email",s.jsx(o.Z,{className:"ml-2 h-4 w-4"})]})},{accessorKey:"role",header:({column:e})=>(0,s.jsxs)(a.z,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),children:["Role",s.jsx(o.Z,{className:"ml-2 h-4 w-4"})]})},{accessorKey:"registeredAt",header:({column:e})=>(0,s.jsxs)(a.z,{variant:"ghost",onClick:()=>e.toggleSorting("asc"===e.getIsSorted()),children:["Created At",s.jsx(o.Z,{className:"ml-2 h-4 w-4"})]})},{id:"actions",cell:({row:e})=>s.jsx(A,{data:e.original})}];var I=r(68218),_=r(7599);let O=({data:e})=>{let t=f();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex border-b pb-2 items-center justify-between",children:[s.jsx(_.X,{title:`Users (${e.length})`,description:"Manage users"}),s.jsx("div",{}),s.jsx("div",{children:(0,s.jsxs)(a.z,{size:"sm",className:"bg-cyan-500",onClick:()=>t.onOpen(),children:[s.jsx(n.Z,{className:"mr-2 h-4 w-4"}),"Add User"]})})]}),s.jsx(I.w,{searchKey:"fullName",clickable:!1,columns:D,data:e})]})};var q=r(49246);let k=()=>{let[e,t]=(0,p.useState)([]);(0,p.useEffect)(()=>{let e=async()=>{let e=await (0,P.AW)();t(e instanceof Array?e:[])};e()},[]);let r=e.map(e=>({userId:e.userId,fullName:e.fullName,role:e.role,email:e.email,status:e.status,registeredBy:e.registeredBy,lastLoggedIn:e.registeredBy,registeredAt:(0,q.Z)(new Date(e.registeredAt),"MMMM do, yyyy"),updatedAt:(0,q.Z)(new Date(e.updatedAt),"MMMM do, yyyy")}));return s.jsx("div",{children:s.jsx(O,{data:r})})}},14024:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(23708);/**
 * @license lucide-react v0.293.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},95397:(e,t,r)=>{"use strict";/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=r(34218);"function"==typeof Object.is&&Object.is,s.useState,s.useEffect,s.useLayoutEffect,s.useDebugValue,t.useSyncExternalStore=void 0!==s.useSyncExternalStore?s.useSyncExternalStore:function(e,t){return t()}},4403:(e,t,r)=>{"use strict";/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=r(34218),a=r(41913),n="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=a.useSyncExternalStore,i=s.useRef,l=s.useEffect,c=s.useMemo,d=s.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,s,a){var u=i(null);if(null===u.current){var p={hasValue:!1,value:null};u.current=p}else p=u.current;var h=o(e,(u=c(function(){function e(e){if(!l){if(l=!0,o=e,e=s(e),void 0!==a&&p.hasValue){var t=p.value;if(a(t,e))return i=t}return i=e}if(t=i,n(o,e))return t;var r=s(e);return void 0!==a&&a(t,r)?t:(o=e,i=r)}var o,i,l=!1,c=void 0===r?null:r;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,r,s,a]))[0],u[1]);return l(function(){p.hasValue=!0,p.value=h},[h]),d(h),h}},41913:(e,t,r)=>{"use strict";e.exports=r(95397)},57359:(e,t,r)=>{"use strict";e.exports=r(4403)},38975:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>o,__esModule:()=>n,default:()=>l});var s=r(95153);let a=(0,s.createProxy)(String.raw`D:\Projects\diaspora-portal\app\admin\users\layout.tsx`),{__esModule:n,$$typeof:o}=a,i=a.default,l=i},33924:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>o,__esModule:()=>n,default:()=>l});var s=r(95153);let a=(0,s.createProxy)(String.raw`D:\Projects\diaspora-portal\app\admin\users\page.tsx`),{__esModule:n,$$typeof:o}=a,i=a.default,l=i},74012:(e,t,r)=>{"use strict";r.d(t,{Ue:()=>u});let s=e=>{let t;let r=new Set,s=(e,s)=>{let a="function"==typeof e?e(t):e;if(!Object.is(a,t)){let e=t;t=(null!=s?s:"object"!=typeof a||null===a)?a:Object.assign({},t,a),r.forEach(r=>r(t,e))}},a=()=>t,n={setState:s,getState:a,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}};return t=e(s,a,n),n},a=e=>e?s(e):s;var n=r(34218),o=r(57359);let{useDebugValue:i}=n,{useSyncExternalStoreWithSelector:l}=o,c=!1,d=e=>{"function"!=typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");let t="function"==typeof e?a(e):e,r=(e,r)=>(function(e,t=e.getState,r){r&&!c&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),c=!0);let s=l(e.subscribe,e.getState,e.getServerState||e.getState,t,r);return i(s),s})(t,e,r);return Object.assign(r,t),r},u=e=>e?d(e):d}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[271,635,827,273,929,441,187,802,246,36,694,621],()=>r(1364));module.exports=s})();