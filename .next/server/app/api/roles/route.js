"use strict";(()=>{var e={};e.id=721,e.ids=[721],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},57147:e=>{e.exports=require("fs")},48201:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>Z,originalPathname:()=>P,patchFetch:()=>v,requestAsyncStorage:()=>h,routeModule:()=>f,serverHooks:()=>g,staticGenerationAsyncStorage:()=>y,staticGenerationBailout:()=>j});var s={};t.r(s),t.d(s,{GET:()=>m,PATCH:()=>w,POST:()=>d});var o=t(10884),a=t(16132),n=t(21040),i=t(95798),u=t(57147),l=t.n(u);let c="roles.json",p=async()=>{try{let e=await l().promises.readFile(c,"utf8");return JSON.parse(e)}catch(e){return console.error(e),{}}};async function d(e){try{let r=await e.json(),{roleName:t,createdAt:s}=r;if(!t)return new i.Z("Role name is required",{status:400});if(!s)return new i.Z("Date is required",{status:400});let o=await p();if(o[t])return new i.Z(`Role '${t}' already exists`,{status:400});return o[t]={permissions:r.permissions||{}},await l().promises.writeFile(c,JSON.stringify(o)),i.Z.json("Success")}catch(e){return console.log("[role_post]",e),new i.Z("Internal error",{status:500})}}async function m(e){try{let e=await p();return i.Z.json(e)}catch(e){return console.log("[roles_get]",e),new i.Z("Internal error",{status:500})}}async function w(e){try{let r=await e.json(),t=await p();if(t[r.roleName])return t[r.roleName]={permissions:r.permissions||{}},await l().promises.writeFile(c,JSON.stringify(t)),i.Z.json("Success");return new i.Z(`Role '${r.roleName}' not found`,{status:404})}catch(e){return console.error("[roles_patch]",e),new i.Z("Internal error",{status:500})}}let f=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/roles/route",pathname:"/api/roles",filename:"route",bundlePath:"app/api/roles/route"},resolvedPagePath:"D:\\Projects\\diaspora-portal\\app\\api\\roles\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:h,staticGenerationAsyncStorage:y,serverHooks:g,headerHooks:Z,staticGenerationBailout:j}=f,P="/api/roles/route";function v(){return(0,n.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:y})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[271,107],()=>t(48201));module.exports=s})();