"use strict";(()=>{var e={};e.id=55,e.ids=[55],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},57147:e=>{e.exports=require("fs")},44748:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>y,originalPathname:()=>P,patchFetch:()=>v,requestAsyncStorage:()=>h,routeModule:()=>w,serverHooks:()=>g,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>j});var s={};t.r(s),t.d(s,{GET:()=>d,PATCH:()=>m,POST:()=>l});var n=t(10884),i=t(16132),o=t(21040),a=t(95798),u=t(57147),p=t.n(u);let c=async()=>{try{let e=await p().promises.readFile("permissions.json","utf8");return JSON.parse(e)}catch(e){return console.error(e),[]}};async function l(e,{params:r}){try{let r=await e.json(),{permissionName:t,createdAt:s}=r;if(!t)return new a.Z("permission name is required",{status:400});if(!s)return new a.Z("date is required",{status:400});let n=await c();return r.permissionId=Math.random().toString(),n.push(r),await p().promises.writeFile("permissions.json",JSON.stringify(n)),a.Z.json("success")}catch(e){return console.log("[permission_post]",e),new a.Z("Internal error",{status:500})}}async function d(e){try{let e=await c();return a.Z.json(e)}catch(e){return console.log("[permission_get]",e),new a.Z("Internal error",{status:500})}}async function m(e){try{let r=await e.json(),t=await c(),s=t.findIndex(e=>e.id===r.id);return s>-1?(t[s]=r,await p().promises.writeFile("permissions.json",JSON.stringify(t))):console.error(`Template with ID ${r.id} not found`),a.Z.json("success")}catch(e){return console.error("[permission_patch]",e),new a.Z("Internal error",{status:500})}}let w=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/permissions/route",pathname:"/api/permissions",filename:"route",bundlePath:"app/api/permissions/route"},resolvedPagePath:"D:\\Projects\\diaspora-portal\\app\\api\\permissions\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:h,staticGenerationAsyncStorage:f,serverHooks:g,headerHooks:y,staticGenerationBailout:j}=w,P="/api/permissions/route";function v(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:f})}}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[271,107],()=>t(44748));module.exports=s})();